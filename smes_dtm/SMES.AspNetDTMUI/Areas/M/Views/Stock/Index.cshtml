@{
    Layout = "~/Areas/M/Views/Shared/_Layout.cshtml";
    ViewBag.Title="库存分析";
}

@section styles{
    <link href="~/Areas/M/Styles/stock.css" rel="stylesheet" />

    <style>
        
    </style>
}

<div class="producerow">
    <div class="row" style="margin:0px;height:100%">
        <div class="col-xs-3" style="padding:0px;">
            <div class="group" style="margin-right:5px;">
                <div class="group-title">
                    <div class="triangle-bottomright"></div>
                    <div class="text">原料立库[占用率(%)]</div>

                </div>
                <div class="groupbody">
                    <div id="chart1" style="height:120px">

                    </div>
                    <div class="row" style="margin-top:10px;">
                        <div class="col-xs-4" style="text-align:center">
                            空位:3554
                        </div>
                        <div class="col-xs-4" style="text-align:center">
                            已用:3554
                        </div>
                        <div class="col-xs-4" style="text-align:center">
                            总位:3554
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xs-3" style="padding:0px;">
            <div class="group" style="margin:0px 5px;">
                <div class="group-title">
                    <div class="triangle-bottomright"></div>
                    <div class="text">辅料立库[占用率(%)]</div>

                </div>
                <div class="groupbody">
                    <div id="chart2" style="height:120px">

                    </div>
                    <div class="row" style="margin-top:10px;">
                        <div class="col-xs-4" style="text-align:center">
                            空位:3554
                        </div>
                        <div class="col-xs-4" style="text-align:center">
                            已用:3554
                        </div>
                        <div class="col-xs-4" style="text-align:center">
                            总位:3554
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xs-3" style="padding:0px;">
            <div class="group" style="margin:0px 5px;">
                <div class="group-title">
                    <div class="triangle-bottomright"></div>
                    <div class="text">咀棒库[占用率(%)]</div>

                </div>
                <div class="groupbody roundchart">
                    <div id="chart3" style="height:120px">

                    </div>
                    <div class="row" style="margin-top:10px;">
                        <div class="col-xs-4" style="text-align:center">
                            空位:3554
                        </div>
                        <div class="col-xs-4" style="text-align:center">
                            已用:3554
                        </div>
                        <div class="col-xs-4" style="text-align:center">
                            总位:3554
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xs-3" style="padding:0px;">
            <div class="group" style="margin-left:5px;">
                <div class="group-title">
                    <div class="triangle-bottomright"></div>
                    <div class="text">成品库[占用率(%)]</div>

                </div>
                <div class="groupbody">
                    <div id="chart4" style="height:120px">

                    </div>
                    <div class="row" style="margin-top:10px;">
                        <div class="col-xs-4" style="text-align:center">
                            空位:3554
                        </div>
                        <div class="col-xs-4" style="text-align:center">
                            已用:3554
                        </div>
                        <div class="col-xs-4" style="text-align:center">
                            总位:3554
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row" style="margin:10px;">
        <div class="group" style="margin:0px -10px;">
            <div class="group-title">
                <div class="triangle-bottomright"></div>
                <div class="text">当前库存情况</div>

            </div>
            <div class="groupbody">
                <ul class="index-list-world">
                    <li>
                        原料立库支持卷包生产的牌号有：真龙（神韵）、真龙（天翔）、真龙（馨云）、真龙（轩云） 
                    </li>

                    <li>
                        辅料立库支持卷包生产的牌号有：真龙（神韵）、真龙（天翔）、真龙（馨云）、真龙（轩云）
                    </li>

                    <li>
                        成品库当前牌号有：真龙（神韵）[100箱]、真龙（天翔）[123箱]、真龙（馨云）[80箱]、真龙（轩云）[421箱]
                    </li>

                    <li>
                        咀棒库当前牌号有：真龙（神韵）、真龙（天翔）、真龙（馨云）、真龙（轩云）
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="row" style="margin:10px;">
        <div class="group" style="margin:0px -10px;">
            <div class="group-title">
                <div class="triangle-bottomright"></div>
                <div class="text">页组配方使用情况</div>

            </div>
            <div class="groupbody">
                <ul class="m-tab">
                    <li>
                        <a href="#" class="m-tab-active" data-item="#item1">已发布</a>
                    </li>
                    <li>
                        <a href="#" data-item="#item2">已在用</a>
                    </li>
                    <li>
                        <a href="#" data-item="#item3">已停用</a>
                    </li>
                </ul>
                <div class="m-tab-panels">
                    <div id="item1">
                        <ul class="index-list-world">
                            <li>
                                真龙（神韵）烟丝版本【20160427#003】于2016/4/27 10:10:10 启用
                            </li>

                            <li>
                                真龙（神韵）烟丝版本【20160427#003】于2016/4/27 10:10:10 启用
                            </li>

                            <li>
                                真龙（神韵）烟丝版本【20160427#003】于2016/4/27 10:10:10 启用
                            </li>

                            <li>
                                真龙（神韵）烟丝版本【20160427#003】于2016/4/27 10:10:10 启用
                            </li>                            
                        </ul>
                    </div>
                    <div id="item2">
                        <ul class="index-list-world">
                            <li>
                                真龙（天翔）烟丝版本【20160427#003】于2016/4/27 10:10:10 启用
                            </li>

                            <li>
                                真龙（天翔）烟丝版本【20160427#003】于2016/4/27 10:10:10 启用
                            </li>

                            <li>
                                真龙（天翔）烟丝版本【20160427#003】于2016/4/27 10:10:10 启用
                            </li>

                            <li>
                                真龙（天翔）烟丝版本【20160427#003】于2016/4/27 10:10:10 启用
                            </li>
                        </ul>
                    </div>
                    <div id="item3">
                        <ul class="index-list-world">
                            <li>
                                真龙（馨云）烟丝版本【20160427#003】于2016/4/27 10:10:10 启用
                            </li>

                            <li>
                                真龙（馨云）烟丝版本【20160427#003】于2016/4/27 10:10:10 启用
                            </li>

                            <li>
                                真龙（馨云）烟丝版本【20160427#003】于2016/4/27 10:10:10 启用
                            </li>

                            <li>
                                真龙（馨云）烟丝版本【20160427#003】于2016/4/27 10:10:10 启用
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</div>

@section scripts{
    @Scripts.Render("~/bundles/chart")
<script src="~/Areas/M/Scripts/highcharts-more.js"></script>

    <script>
        $(function () {

            var active = $(".m-tab>li>.m-tab-active").data("item");
            $(active).show();

            $(".m-tab>li>a").click(function () {
                
                //debugger;
                var panel = $(this).data("item");
                var curitem = $(".m-tab>li>.m-tab-active").data("item");

                if (panel == curitem)
                    return;

                $(curitem).hide();
                $(panel).show();
                
                $(".m-tab>li>.m-tab-active").removeClass("m-tab-active");
                $(this).addClass("m-tab-active");

            });
            CreateChart($("#chart1"), 60);
            CreateChart($("#chart2"), 50);
            CreateChart($("#chart3"), 70);
            CreateChart($("#chart4"), 70);

        });

        function CreateChart(container, value)
        {
            container.highcharts({
                chart: {
                    type: 'gauge',
                    plotBackgroundColor: null,
                    plotBackgroundImage: null,
                    plotBorderWidth: 0,
                    plotShadow: false,
                    backgroundColor: null
                },
                credits: { enabled: false },

                title: {
                    text: ''
                },

                pane: {
                    startAngle: -90,
                    endAngle: 90,
                    background: "red",
                    center: ['50%', '100%'],
                    size: 180
                },

                // the value axis
                yAxis: {
                    min: 0,
                    max: 100,

                    minorTickInterval: 'auto',
                    minorTickWidth: 0,
                    minorTickLength: 10,
                    minorTickPosition: 'inside',
                    minorTickColor: '#3598db',

                    tickPixelInterval: 30,
                    tickWidth: 0,
                    tickPosition: 'inside',
                    tickLength: 0,
                    tickColor: '#3598db',
                    labels: {
                        step: 2,
                        rotation: 'auto'
                    },
                    title: {
                        text: ''
                    },
                    plotBands: [{
                        from: 0,
                        to: 120,
                        color: '#55BF3B' // green
                    }, {
                        from: 120,
                        to: 160,
                        color: '#DDDF0D' // yellow
                    }, {
                        from: 160,
                        to: 200,
                        color: '#DF5353' // red
                    }]
                },

                plotOptions: {
                    gauge: {
                        dataLabels: {
                            //enabled: false
                            borderWidth: 0,
                            y: -50,
                            format: "{y}%",
                            color: "#999"
                        },
                        dial: {
                            backgroundColor: "#666"
                        }
                    }
                },

                series: [{
                    name: '占用率',
                    data: [value],
                    tooltip: {
                        valueSuffix: ' %'
                    }
                }]

            }
            );
        }
    </script>
}